{{- if .Values.frontend.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "torale.fullname" . }}-frontend-config
  labels:
    {{- include "torale.frontend.labels" . | nindent 4 }}
data:
  config.js: |
    // Runtime configuration injected by Kubernetes
    window.CONFIG = {
      apiUrl: 'https://{{ .Values.domains.api }}',
      clerkPublishableKey: '{{ .Values.clerk.publishableKey }}',
      {{- if .Values.posthog.enabled }}
      posthogApiKey: '{{ .Values.posthog.apiKey }}',
      posthogHost: '{{ .Values.posthog.apiHost }}'
      {{- else }}
      posthogApiKey: undefined,
      posthogHost: undefined
      {{- end }}
    };
{{- end }}
